<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula: Arquitetura DAL e POO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        .slide {
            min-height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 4rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .nav-button {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.7);
            border: 1px solid #d1d5db;
            border-radius: 9999px;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
        }

        .nav-button:hover {
            background-color: white;
        }

        .counter {
            position: fixed;
            bottom: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid #e5e7eb;
        }

        code,
        pre {
            font-family: 'Roboto Mono', monospace;
        }
        
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1.5rem;
            font-size: 1rem;
            line-height: 1.6;
            color: #1e293b;
            overflow-x: auto;
        }

        code.inline-code {
            background-color: #e5e7eb;
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            border-radius: 3px;
        }
        
        /* Cores para Syntax Highlighting */
        .token-comment { color: #6a737d; font-style: italic; }
        .token-keyword { color: #d73a49; }
        .token-string { color: #032f62; }
        .token-function { color: #6f42c1; }
        .token-type { color: #005cc5; }

    </style>
</head>

<body>
    <main>
        <!-- Slide 1: Título -->
        <section class="slide">
            <div class="slide-content text-center">
                <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-4">POO no Mundo Real</h1>
                <p class="text-2xl md:text-3xl text-purple-600">Herança no WinForms e a Arquitetura DAL</p>
                <p class="text-xl text-gray-600 mt-8">Prof. William Paiva</p>
            </div>
        </section>

        <!-- Slide 2: Herança no VS -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Vocês já usam Herança (e talvez não saibam)</h2>
                <p class="text-xl mb-6">Toda vez que vocês criam um novo formulário no Visual Studio, ele escreve este código:</p>
                <pre><code><span class="token-keyword">public</span> <span class="token-keyword">partial</span> <span class="token-keyword">class</span> <span class="token-type">Form1</span> : <span class="token-type">Form</span>
{
    <span class="token-comment">// ...</span>
}</code></pre>
                <p class="text-xl mt-6">O <code class="inline-code">: Form</code> significa que a sua classe <code class="inline-code">Form1</code> <strong>herda</strong> da classe <code class="inline-code">Form</code> da Microsoft. Por isso, sua janela já sabe como ser arrastada, maximizada e fechada. Vocês herdam todo esse comportamento!</p>
            </div>
        </section>

        <!-- Slide 3: O Jeito Errado -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">O Jeito "Iniciante" de Acessar o Banco</h2>
                <p class="text-xl mb-6">Colocar todo o código de acesso ao banco dentro do botão funciona, mas causa problemas:</p>
                <pre><code><span class="token-keyword">private</span> <span class="token-keyword">void</span> <span class="token-function">btnCarregar_Click</span>(<span class="token-type">object</span> sender, <span class="token-type">EventArgs</span> e)
{
    <span class="token-comment">// Ugh! Conexão, SQL, laços... tudo misturado!</span>
    <span class="token-type">MySqlConnection</span> conexao = <span class="token-keyword">new</span> <span class="token-function">MySqlConnection</span>(...);
    conexao.<span class="token-function">Open</span>();
    <span class="token-type">MySqlCommand</span> cmd = <span class="token-keyword">new</span> <span class="token-function">MySqlCommand</span>(<span class="token-string">"SELECT * ..."</span>, conexao);
    <span class="token-comment">// ... mais e mais código ...</span>
}</code></pre>
                <ul class="text-xl space-y-3 list-disc pl-6 mt-6">
                    <li><strong class="text-red-600">Repetição de Código:</strong> Se outra tela precisar dos alunos, você copia e cola?</li>
                    <li><strong class="text-red-600">Manutenção Difícil:</strong> Se a tabela mudar, você tem que caçar e alterar o SQL em todos os formulários.</li>
                    <li><strong class="text-red-600">Acoplamento:</strong> Seu formulário está "amarrado" ao MySQL. Se um dia mudar para outro banco, é um desastre.</li>
                </ul>
            </div>
        </section>

        <!-- Slide 4: A Solução em Camadas -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-center">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">A Solução Profissional: Arquitetura em Camadas</h2>
                <p class="text-xl mb-8">Separamos o projeto em responsabilidades. Cada camada só fala com a sua vizinha.</p>
                <div class="bg-white p-8 rounded-lg shadow-md border">
                    <div class="flex items-center justify-center p-4 bg-blue-100 text-blue-800 rounded-lg">
                        <p class="text-xl font-bold">Formulário (UI)</p>
                    </div>
                    <div class="text-4xl my-4">↕️</div>
                    <div class="flex items-center justify-center p-4 bg-purple-100 text-purple-800 rounded-lg">
                        <p class="text-xl font-bold">Camada de Acesso a Dados (DAL)</p>
                    </div>
                    <div class="text-4xl my-4">↕️</div>
                    <div class="flex items-center justify-center p-4 bg-gray-200 text-gray-800 rounded-lg">
                        <p class="text-xl font-bold">Banco de Dados (MySQL)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 5: Construindo a DAL -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Construindo a Classe <code class="inline-code">AlunoDAL</code></h2>
                <p class="text-xl mb-6">Esta classe terá a <strong>única responsabilidade</strong> de acessar a tabela de alunos. O formulário não precisa saber como isso acontece.</p>
                <pre><code><span class="token-keyword">public</span> <span class="token-keyword">class</span> <span class="token-type">AlunoDAL</span>
{
    <span class="token-keyword">private</span> <span class="token-type">string</span> _connectionString = <span class="token-string">"..."</span>;

    <span class="token-keyword">public</span> <span class="token-type">void</span> <span class="token-function">Salvar</span>(<span class="token-type">Aluno</span> aluno)
    {
        <span class="token-comment">// Lógica do INSERT...</span>
    }

    <span class="token-keyword">public</span> <span class="token-type">List&lt;Aluno&gt;</span> <span class="token-function">ListarTodos</span>()
    {
        <span class="token-comment">// Lógica do SELECT...</span>
        <span class="token-keyword">return</span> listaDeAlunos;
    }
}</code></pre>
            </div>
        </section>
        
        <!-- Slide 6: As Classes de Modelo -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">A Classe de Modelo: <code class="inline-code">Aluno</code></h2>
                <p class="text-xl mb-6">Esta classe é um "molde" para os dados de um aluno. Ela representa uma linha da nossa tabela no banco de dados.</p>
                <pre><code><span class="token-keyword">public</span> <span class="token-keyword">class</span> <span class="token-type">Aluno</span>
{
    <span class="token-keyword">public</span> <span class="token-type">int</span> Id { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
    <span class="token-keyword">public</span> <span class="token-type">string</span> Nome { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
    <span class="token-keyword">public</span> <span class="token-type">string</span> Email { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
}</code></pre>
            </div>
        </section>

        <!-- Slide 7: O Formulário Limpo -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">O Formulário (UI) - Agora Simples e Limpo!</h2>
                <p class="text-xl mb-6">Veja como o código do botão ficou mais legível e focado na sua tarefa: orquestrar a busca e a exibição dos dados.</p>
                <pre><code><span class="token-keyword">private</span> <span class="token-keyword">void</span> <span class="token-function">btnListar_Click</span>(<span class="token-type">object</span> sender, <span class="token-type">EventArgs</span> e)
{
    <span class="token-comment">// 1. Pede os dados para a DAL.</span>
    <span class="token-type">AlunoDAL</span> dal = <span class="token-keyword">new</span> <span class="token-function">AlunoDAL</span>();
    <span class="token-type">List&lt;Aluno&gt;</span> alunos = dal.<span class="token-function">ListarTodos</span>();

    <span class="token-comment">// 2. Exibe os resultados.</span>
    <span class="token-keyword">foreach</span> (<span class="token-type">Aluno</span> a <span class="token-keyword">in</span> alunos)
    {
        listBoxResultados.Items.<span class="token-function">Add</span>(a.Nome);
    }
}</code></pre>
            </div>
        </section>

        <!-- Slide 8: Juntando Tudo -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Juntando Tudo: O Fluxo da Informação</h2>
                <ol class="text-xl space-y-4 list-decimal pl-6">
                    <li>Usuário clica no botão.</li>
                    <li>O <strong>Formulário</strong> cria uma instância da <code class="inline-code">AlunoDAL</code> e chama um de seus métodos.</li>
                    <li>A <strong>DAL</strong> se conecta ao banco, executa o SQL (SELECT, INSERT, etc).</li>
                    <li>Se for uma consulta, a DAL cria objetos <code class="inline-code">new Aluno()</code> e retorna uma lista.</li>
                    <li>O <strong>Formulário</strong> recebe a lista (se houver) e atualiza a tela para o usuário.</li>
                </ol>
            </div>
        </section>

        <!-- Slide 9: Plano de Ação (Atualizado) -->
        <section class="slide">
            <div class="slide-content w-full max-w-4xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Nosso Plano de Ação (Live Coding)</h2>
                <p class="text-xl mb-6">Vamos construir a operação de <strong>Salvar um Aluno</strong> seguindo a arquitetura em camadas.</p>
                <ol class="text-xl space-y-4 list-decimal pl-6">
                    <li><strong>Estrutura:</strong> Criar a solução, projetos e referências no Visual Studio.</li>
                    <li><strong>Banco de Dados:</strong> Criar a tabela <code class="inline-code">alunos</code>.</li>
                    <li><strong>Model (Entidades):</strong> Criar a classe <code class="inline-code">Aluno.cs</code>.</li>
                    <li><strong>DAL:</strong> Criar a <code class="inline-code">ConexaoBD.cs</code> e a <code class="inline-code">AlunoDAL.cs</code> com o método <code class="inline-code">Salvar</code>.</li>
                    <li><strong>UI (formAluno.cs):</strong> No clique do botão <code class="inline-code">Salvar</code>, chamar a DAL para inserir os dados.</li>
                </ol>
            </div>
        </section>
        
        <!-- NOVO SLIDE 10: Estrutura do Projeto -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">1. Estrutura: Configurando a Solução</h2>
                 <ol class="text-xl space-y-5 list-decimal pl-6">
                    <li>Crie uma <strong>Solução em Branco</strong> (<code class="inline-code">Blank Solution</code>).</li>
                    <li>Adicione três novos projetos à solução:
                        <ul class="list-disc pl-8 mt-2 space-y-2">
                            <li><strong>Biblioteca de Classes</strong> chamada <code class="inline-code">Entidades</code>.</li>
                            <li><strong>Biblioteca de Classes</strong> chamada <code class="inline-code">DAL</code>.</li>
                            <li><strong>Aplicativo do Windows Forms</strong> chamado <code class="inline-code">UI</code>.</li>
                        </ul>
                    </li>
                    <li>Adicione as <strong>Referências</strong> entre os projetos:
                        <ul class="list-disc pl-8 mt-2 space-y-2">
                             <li>No projeto <code class="inline-code">UI</code> &rarr; Adicionar Referência &rarr; Projetos &rarr; Marcar <code class="inline-code">DAL</code> e <code class="inline-code">Entidades</code>.</li>
                             <li>No projeto <code class="inline-code">DAL</code> &rarr; Adicionar Referência &rarr; Projetos &rarr; Marcar <code class="inline-code">Entidades</code>.</li>
                        </ul>
                    </li>
                     <li>Instale o pacote do <strong>MySQL via NuGet</strong>:
                        <ul class="list-disc pl-8 mt-2 space-y-2">
                             <li>No projeto <code class="inline-code">DAL</code> &rarr; Clique direito &rarr; <code class="inline-code">Manage NuGet Packages...</code></li>
                             <li>Na aba <code class="inline-code">Browse</code>, procure por <code class="inline-code">MySql.Data</code> e clique em Instalar.</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </section>
        
        <!-- SLIDE 11 (era 10): SQL -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">2. Banco de Dados: Tabela <code class="inline-code">alunos</code></h2>
                <pre><code><span class="token-keyword">CREATE TABLE</span> alunos (
    <span class="token-type">id</span> <span class="token-keyword">INT</span> AUTO_INCREMENT <span class="token-keyword">PRIMARY KEY</span>,
    <span class="token-type">nome</span> <span class="token-keyword">VARCHAR</span>(100) <span class="token-keyword">NOT NULL</span>,
    <span class="token-type">email</span> <span class="token-keyword">VARCHAR</span>(100)
);</code></pre>
            </div>
        </section>

        <!-- SLIDE 12 (era 11): Model Aluno -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">3. Model: A classe <code class="inline-code">Aluno.cs</code></h2>
                <p class="text-lg mb-4 text-gray-600">Projeto: Entidades</p>
                <pre><code><span class="token-keyword">namespace</span> EscolaApp.Entidades
{
    <span class="token-keyword">public</span> <span class="token-keyword">class</span> <span class="token-type">Aluno</span>
    {
        <span class="token-keyword">public</span> <span class="token-type">int</span> Id { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
        <span class="token-keyword">public</span> <span class="token-type">string</span> Nome { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
        <span class="token-keyword">public</span> <span class="token-type">string</span> Email { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; }
    }
}</code></pre>
            </div>
        </section>
        
        <!-- SLIDE 13 (era 12): ConexaoBD -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">4. DAL: A classe <code class="inline-code">ConexaoBD.cs</code></h2>
                <p class="text-lg mb-4 text-gray-600">Projeto: DAL</p>
                <pre><code><span class="token-keyword">using</span> MySql.Data.MySqlClient;

<span class="token-keyword">namespace</span> EscolaApp.DAL
{
    <span class="token-keyword">public</span> <span class="token-keyword">class</span> <span class="token-type">ConexaoBD</span>
    {
        <span class="token-keyword">private static readonly</span> <span class="token-type">string</span> _connectionString = <span class="token-string">"Server=localhost;Database=sua_db;Uid=root;Pwd=sua_senha;"</span>;

        <span class="token-keyword">public static</span> <span class="token-type">MySqlConnection</span> <span class="token-function">GetConnection</span>()
        {
            <span class="token-keyword">return new</span> <span class="token-function">MySqlConnection</span>(_connectionString);
        }
    }
}</code></pre>
            </div>
        </section>
        
        <!-- SLIDE 14 (era 13): AlunoDAL -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">4. DAL: A classe <code class="inline-code">AlunoDAL.cs</code> (Continuação)</h2>
                 <p class="text-lg mb-4 text-gray-600">Projeto: DAL</p>
                <pre><code><span class="token-keyword">using</span> MySql.Data.MySqlClient;
<span class="token-keyword">using</span> EscolaApp.Entidades;

<span class="token-keyword">namespace</span> EscolaApp.DAL
{
    <span class="token-keyword">public</span> <span class="token-keyword">class</span> <span class="token-type">AlunoDAL</span>
    {
        <span class="token-keyword">public</span> <span class="token-type">void</span> <span class="token-function">Salvar</span>(<span class="token-type">Aluno</span> aluno)
        {
            <span class="token-keyword">using</span> (<span class="token-type">var</span> conexao = ConexaoBD.<span class="token-function">GetConnection</span>())
            {
                conexao.<span class="token-function">Open</span>();
                <span class="token-type">string</span> sql = <span class="token-string">"INSERT INTO alunos (nome, email) VALUES (@nome, @email)"</span>;
                <span class="token-keyword">using</span> (<span class="token-type">var</span> cmd = <span class="token-keyword">new</span> <span class="token-function">MySqlCommand</span>(sql, conexao))
                {
                    cmd.Parameters.<span class="token-function">AddWithValue</span>(<span class="token-string">"@nome"</span>, aluno.Nome);
                    cmd.Parameters.<span class="token-function">AddWithValue</span>(<span class="token-string">"@email"</span>, aluno.Email);
                    cmd.<span class="token-function">ExecuteNonQuery</span>();
                }
            }
        }
    }
}</code></pre>
            </div>
        </section>

        <!-- SLIDE 15 (era 14): UI -->
        <section class="slide">
            <div class="slide-content w-full max-w-5xl text-left">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">5. UI: O código do <code class="inline-code">btnSalvar_Click</code></h2>
                <p class="text-lg mb-4 text-gray-600">Projeto: UI (frmAluno.cs)</p>
                <pre><code><span class="token-keyword">using</span> EscolaApp.Entidades;
<span class="token-keyword">using</span> EscolaApp.DAL;

<span class="token-keyword">private</span> <span class="token-keyword">void</span> <span class="token-function">btnSalvar_Click</span>(<span class="token-type">object</span> sender, <span class="token-type">EventArgs</span> e)
{
    <span class="token-comment">// 1. Coleta os dados da tela</span>
    <span class="token-type">Aluno</span> novoAluno = <span class="token-keyword">new</span> <span class="token-function">Aluno</span>();
    novoAluno.Nome = txtNome.Text;
    novoAluno.Email = txtEmail.Text;

    <span class="token-comment">// 2. Envia para a DAL salvar</span>
    <span class="token-keyword">try</span>
    {
        <span class="token-type">AlunoDAL</span> dal = <span class="token-keyword">new</span> <span class="token-function">AlunoDAL</span>();
        dal.<span class="token-function">Salvar</span>(novoAluno);
        MessageBox.<span class="token-function">Show</span>(<span class="token-string">"Aluno salvo com sucesso!"</span>);
    }
    <span class="token-keyword">catch</span> (Exception ex)
    {
        MessageBox.<span class="token-function">Show</span>(<span class="token-string">"Erro ao salvar: "</span> + ex.Message);
    }
}</code></pre>
            </div>
        </section>

        <!-- SLIDE 16 (era 15): Dúvidas -->
        <section class="slide">
            <div class="slide-content text-center">
                <h1 class="text-7xl font-extrabold text-gray-900">Perguntas?</h1>
            </div>
        </section>

    </main>

    <!-- Elementos de Navegação Adicionados -->
    <button id="prev" class="nav-button left-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
    <button id="next" class="nav-button right-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
    <div id="counter" class="counter"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.slide');
            const prevButton = document.getElementById('prev');
            const nextButton = document.getElementById('next');
            const counterElement = document.getElementById('counter');
            let currentSlideIndex = 0;

            function updateCounter(index) {
                if (counterElement) {
                    counterElement.textContent = `${index + 1} / ${sections.length}`;
                }
            }

            function navigateTo(index) {
                if (index >= 0 && index < sections.length) {
                    sections[index].scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }
            if (prevButton) {
                prevButton.addEventListener('click', () => {
                    navigateTo(currentSlideIndex > 0 ? currentSlideIndex - 1 : sections.length - 1);
                });
            }
            if (nextButton) {
                nextButton.addEventListener('click', () => {
                    navigateTo(currentSlideIndex < sections.length - 1 ? currentSlideIndex + 1 : 0);
                });
            }
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    nextButton.click();
                } else if (e.key === 'ArrowLeft') {
                    prevButton.click();
                }
            });
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const index = Array.from(sections).indexOf(entry.target);
                        currentSlideIndex = index;
                        updateCounter(index);
                    }
                });
            }, {
                threshold: 0.5
            });
            sections.forEach(section => observer.observe(section));
            updateCounter(0);
        });
    </script>
</body>

</html>

