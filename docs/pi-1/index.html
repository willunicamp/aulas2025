<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="iso-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WBS - Exemplo App de Caronas (Horizontal)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            padding: 1rem;
        }

        /* Estilo dos Nós (Caixas) */
        .node {
            border: 1px solid #e2e8f0; /* slate-200 */
            padding: 12px 16px;
            width: 170px; /* Tamanho fixo */
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            background-color: white;
            position: absolute; /* Posição controlada via JS */
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

            .node:hover {
                transform: translateY(-2px) scale(1.02);
                box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            }

        .level-1 {
            background-color: #0f172a;
            color: white;
            border-color: #0f172a;
        }

        .level-2 {
            background-color: #1e293b;
            color: white;
        }
        /* slate-800 */
        .level-3 {
            background-color: #334155;
            color: white;
        }
        /* slate-700 */
        .level-4 {
            background-color: #f1f5f9;
            color: #1e293b;
        }
        /* slate-100 */
        .level-5 {
            background-color: #ffffff;
            color: #475569;
            border-color: #cbd5e1;
        }
        /* white */

        .node .code {
            font-size: 0.75rem;
            font-weight: 600;
            color: #94a3b8;
            display: block;
        }

        .level-1 .code, .level-2 .code, .level-3 .code {
            color: #cbd5e1;
        }

        .node .title {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Contêiner da Árvore */
        .tree-wrapper {
            overflow-x: auto;
            padding: 1rem;
        }

        .tree-container {
            position: relative;
            display: inline-block;
        }

        /* Estilo das Linhas Conectoras (criadas via JS) */
        .connector {
            position: absolute;
            background-color: #cbd5e1; /* slate-300 */
            z-index: -1;
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="max-w-7xl mx-auto text-center mb-12">
        <h1 class="text-3xl font-bold text-slate-800">Estrutura Analítica do Projeto (WBS/EAP)</h1>
        <p class="mt-2 text-lg text-slate-600">Exemplo Completo: App de Caronas Universitárias (Layout Horizontal)</p>
    </div>

    <div class="tree-wrapper">
        <div id="tree-container" class="tree-container">
            <!-- Os nós da árvore serão inseridos aqui via JS -->
        </div>
    </div>

    <script>// --- DADOS DA ÁRVORE (WBS) ATUALIZADOS ---
        const treeData = {
            id: '1.0', title: 'App de Caronas', level: 1,
            children: [
                { id: '1.1', title: 'Desenvolvimento Mobile', level: 2, children: [
                    { id: '1.1.1', title: 'Aplicativo do Passageiro', level: 3, children: [
                        { id: '1.1.1.1', title: 'Gerenciamento de Conta', level: 4, children: [
                            { id: '1.1.1.1.1', title: 'Cadastro de Usuário', level: 5 },
                            { id: '1.1.1.1.2', title: 'Login e Autenticação', level: 5 },
                            { id: '1.1.1.1.3', title: 'Perfil do Usuário', level: 5 },
                        ]},
                        { id: '1.1.1.2', title: 'Módulo de Caronas', level: 4, children: [
                            { id: '1.1.1.2.1', title: 'Busca de Caronas', level: 5 },
                            { id: '1.1.1.2.2', title: 'Reserva de Vaga', level: 5 },
                            { id: '1.1.1.2.3', title: 'Histórico de Viagens', level: 5 },
                        ]},
                        { id: '1.1.1.3', title: 'Sistema de Pagamento', level: 4, children: [
                            { id: '1.1.1.3.1', title: 'Cadastro de Cartão', level: 5 },
                            { id: '1.1.1.3.2', title: 'Processamento do Pagamento', level: 5 },
                        ]},
                    ]},
                    { id: '1.1.2', title: 'Aplicativo do Motorista', level: 3, children: [
                        { id: '1.1.2.1', title: 'Gerenciamento de Conta', level: 4, children: [
                            { id: '1.1.2.1.1', title: 'Validação de Documentos', level: 5 },
                            { id: '1.1.2.1.2', title: 'Cadastro de Veículo', level: 5 },
                        ]},
                        { id: '1.1.2.2', title: 'Módulo de Rotas', level: 4, children: [
                            { id: '1.1.2.2.1', title: 'Oferta de Carona', level: 5 },
                            { id: '1.1.2.2.2', title: 'Gerenciamento de Passageiros', level: 5 },
                        ]},
                    ]},
                ]},
                { id: '1.2', title: 'Desenvolvimento Frontend', level: 2, children: [
                     { id: '1.2.1', title: 'Painel Administrativo', level: 3, children: [
                        { id: '1.2.1.1', title: 'Dashboard Principal', level: 4 },
                        { id: '1.2.1.2', title: 'Gestão de Usuários', level: 4 },
                        { id: '1.2.1.3', title: 'Relatórios', level: 4 },
                    ]},
                ]},
                { id: '1.3', title: 'Desenvolvimento Backend', level: 2, children: [
                    { id: '1.3.1', title: 'API de Dados', level: 3 },
                    { id: '1.3.2', title: 'Banco de Dados', level: 3 },
                    { id: '1.3.3', title: 'Serviço de Autenticação', level: 3 },
                ]},
                { id: '1.4', title: 'Gerenciamento do Projeto', level: 2, children: [
                    { id: '1.4.1', title: 'Documentação', level: 3 },
                    { id: '1.4.2', title: 'Reuniões de Acompanhamento', level: 3 },
                    { id: '1.4.3', title: 'Controle de Qualidade', level: 3 },
                ]},
            ]
        };

        // --- LÓGICA DE RENDERIZAÇÃO DA ÁRVORE ---
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('tree-container');

            // Constantes de layout
            const NODE_WIDTH = 170;
            const NODE_HEIGHT = 90; // Aumentado para evitar overflow de texto
            const H_GAP = 80;
            const V_GAP = 25;

            function drawTree(node) {
                const nodeEl = document.createElement('div');
                nodeEl.className = `node level-${node.level}`;
                nodeEl.innerHTML = `<span class="code">${node.id}</span><span class="title">${node.title}</span>`;
                nodeEl.style.width = `${NODE_WIDTH}px`;
                nodeEl.style.height = `${NODE_HEIGHT}px`;
                container.appendChild(nodeEl);
                node.el = nodeEl;

                let totalHeight = 0;

                if (node.children && node.children.length > 0) {
                    node.children.forEach(child => {
                        const childHeight = drawTree(child);
                        totalHeight += childHeight;
                    });
                }

                const nodeBlockHeight = (node.children && node.children.length > 0)
                    ? totalHeight + (node.children.length - 1) * V_GAP
                    : NODE_HEIGHT;

                node.height = nodeBlockHeight;
                return nodeBlockHeight;
            }

            function positionTree(node, top = 0, left = 0) {
                node.el.style.left = `${left}px`;
                const nodeTop = (node.children && node.children.length > 0)
                    ? top + (node.height / 2) - (NODE_HEIGHT / 2)
                    : top;
                node.el.style.top = `${nodeTop}px`;
                node.y = nodeTop;

                if (node.children && node.children.length > 0) {
                    let childTop = top;
                    const childLeft = left + NODE_WIDTH + H_GAP;

                    createConnector(
                        left + NODE_WIDTH,
                        nodeTop + NODE_HEIGHT / 2,
                        H_GAP / 2,
                        2
                    );

                    node.children.forEach((child, index) => {
                        positionTree(child, childTop, childLeft);

                        createConnector(
                            childLeft - H_GAP / 2,
                            child.y + NODE_HEIGHT / 2,
                            H_GAP / 2,
                            2
                        );

                        childTop += child.height + V_GAP;
                    });

                    const firstChild = node.children[0];
                    const lastChild = node.children[node.children.length - 1];
                    createConnector(
                        childLeft - H_GAP / 2,
                        firstChild.y + NODE_HEIGHT / 2,
                        2,
                        (lastChild.y - firstChild.y)
                    );
                }
            }

            function createConnector(left, top, width, height) {
                const line = document.createElement('div');
                line.className = 'connector';
                line.style.left = `${left}px`;
                line.style.top = `${top}px`;
                line.style.width = `${width}px`;
                line.style.height = `${height}px`;
                container.appendChild(line);
            }

            const totalTreeHeight = drawTree(treeData);
            container.style.height = `${totalTreeHeight}px`;
            positionTree(treeData);
        });</script>
</body>
</html>
